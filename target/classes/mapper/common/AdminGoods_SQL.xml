<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="adminGoods">
	
	<!-- 조인으로 상품 가져와야돼 -->
	<select id="selectAdminGoodsList" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
			SELECT A.GOODS_NUMBER, A.GOODS_CATEGORY1, A.GOODS_CATEGORY2, A.GOODS_NAME,
			A.GOODS_PRICE, A.GOODS_DCPRICE, A.GOODS_DATE, D.GOODS_SELLCOUNT, A.GOODS_THUMBNAIL,
			D.GOODS_AMOUNT, D.GOODS_SIZE, D.GOODS_COLOR
			FROM GOODS A, GOODS_KINDS D 
      WHERE A.GOODS_NUMBER=D.GOODS_NUMBER ORDER BY A.GOODS_NUMBER DESC, D.GOODS_COLOR ASC
		]]>
	</select>
	
	<select id="countAdminGoods" resultType="integer">
		<![CDATA[
			SELECT COUNT(GOODS_NUMBER) FROM GOODS
		]]>
	</select>
	
	<insert id="insertAdminGoods" parameterType="hashmap" useGeneratedKeys="true" keyProperty="GOODS_NUMBER">
		<selectKey keyProperty="GOODS_NUMBER" resultType="integer" order="BEFORE">
			SELECT GOODS_NUMBER_SEQ.NEXTVAL FROM DUAL
		</selectKey>
		<![CDATA[
			INSERT INTO GOODS ( 
			GOODS_NUMBER, GOODS_NAME, GOODS_PRICE,
			GOODS_SIMPLE, GOODS_DETAIL, 
			GOODS_DATE, GOODS_CATEGORY1, GOODS_CATEGORY2
			 ) VALUES ( 
			#{GOODS_NUMBER}, #{GOODS_NAME}, #{GOODS_PRICE},
			#{GOODS_SIMPLE}, #{GOODS_DETAIL},
			sysdate, #{GOODS_CATEGORY1}, #{GOODS_CATEGORY2} )
		]]>
	</insert>
	
	<insert id="insertAdminGoodsKinds" parameterType="hashmap">
		<![CDATA[
			INSERT INTO GOODS_KINDS (
			GOODS_NUMBER, GOODS_AMOUNT, GOODS_SIZE, GOODS_COLOR
			) VALUES ( #{GOODS_NUMBER}, #{GOODS_AMOUNT},
			#{GOODS_SIZE}, #{GOODS_COLOR} )
			
		]]>
	</insert>
	
	<insert id="insertAdminGoodsImage" parameterType="hashmap">
		<![CDATA[
			INSERT INTO IMAGE (
			GOODS_NUMBER, IMAGE_NUMBER, IMAGE
			) VALUES (
			#{GOODS_NUMBER}, IMAGE_NUMBER_SEQ.NEXTVAL, #{IMAGE} )
		]]>
	</insert>
	
	<update id="insertGoodsThumbnail" parameterType="hashmap">
		<![CDATA[
			UPDATE GOODS SET GOODS_THUMBNAIL= #{GOODS_THUMBNAIL} WHERE GOODS_NUMBER=#{GOODS_NUMBER}
		]]>
	</update>
	
	<update id="modifyAdminGoods" parameterType="hashmap">
		<![CDATA[
			
		]]>
	</update>
	
	<delete id="deleteAdminGoods" parameterType="hashmap">
		<![CDATA[
			
		]]>
	</delete>
	
	<select id="searchAdminGoodsList" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
			
		]]>
	</select>
	

</mapper>